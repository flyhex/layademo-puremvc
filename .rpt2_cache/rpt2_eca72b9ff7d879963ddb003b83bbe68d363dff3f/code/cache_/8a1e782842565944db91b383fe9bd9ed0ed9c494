{
  "code": "import UserVO from \"../vo/UserVO\";\r\nvar Browser = Laya.Browser;\r\nimport { StorageType } from \"./GameConstans\";\r\nexport default class GameData {\r\n    constructor() {\r\n        this._user = new UserVO();\r\n        this._config = {};\r\n    }\r\n    get config() {\r\n        return this._config;\r\n    }\r\n    set config(value) {\r\n        this._config = value;\r\n    }\r\n    get serverList() {\r\n        if (!this._serverList) {\r\n            this._serverList = [\r\n                { type: StorageType.USER, data: this.user },\r\n                { type: StorageType.FRIENDS, data: this.user },\r\n                { type: StorageType.SYS, data: this.user },\r\n            ];\r\n        }\r\n        return this._serverList;\r\n    }\r\n    static get i() {\r\n        if (!this._i)\r\n            this._i = new GameData();\r\n        return this._i;\r\n    }\r\n    get user() {\r\n        return this._user;\r\n    }\r\n    set user(value) {\r\n        this._user = value;\r\n    }\r\n    init(callBack) {\r\n        GameLocalStorage.ins.getDataByKey(GameLocalStorage.USER, (usr) => {\r\n            if (usr) {\r\n                SMHelper.ins.assignObject(this.user, usr);\r\n            }\r\n            GameData.ins.user.init();\r\n            if (callBack)\r\n                callBack();\r\n            let isSameDay = true;\r\n            if (GameData.ins.user.loginDays) {\r\n                isSameDay = TimeTrans.ins.timeStampIsSameDay(GameData.ins.user.loginTimeStamp, Browser.now());\r\n                if (!isSameDay)\r\n                    this.updateNewDays();\r\n            }\r\n            else {\r\n                this.updateNewDays();\r\n            }\r\n            SystemDa;\r\n        });\r\n    }\r\n    dayDataUpdate() {\r\n    }\r\n    updateNewDays() {\r\n        GameData.ins.user.loginDays++;\r\n        GameData.ins.user.loginTimeStamp = TimeTrans.ins.getTodayMinTimeStamp();\r\n        GameData.ins.dayDataUpdate();\r\n    }\r\n}\r\n",
  "references": [
    "/jsroads/blog/layademo-puremvc/src/model/vo/UserVO.ts",
    "/jsroads/blog/layademo-puremvc/src/model/data/GameConstans.ts"
  ]
}
