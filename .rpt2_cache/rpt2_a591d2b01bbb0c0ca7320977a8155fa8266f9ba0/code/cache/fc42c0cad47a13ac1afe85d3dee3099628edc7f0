{
  "code": "import { ui } from \"../../ui/layaMaxUI\";\r\nimport GameData from \"../../model/data/GameData\";\r\nvar Event = Laya.Event;\r\nvar Handler = Laya.Handler;\r\nvar Browser = Laya.Browser;\r\nvar Tween = Laya.Tween;\r\nvar LoadUI = ui.smile.LoadUI;\r\nexport default class LoadingView extends LoadUI {\r\n    constructor() {\r\n        super();\r\n        this.autoDestroyAtClosed = true;\r\n    }\r\n    static loadSub() {\r\n    }\r\n    onAwake() {\r\n        this.bar.value = 0;\r\n        this.bar.changeHandler = new Handler(this, this.changeValue, null, false);\r\n        Laya.loader.on(Event.ERROR, this, (e) => {\r\n            console.log(\"Laya.loader:ERROR\" + JSON.stringify(e));\r\n        });\r\n        let assets = GameData.i.config.resConfig;\r\n        let options = assets.resourceOptions, resList = [], info = assets.baseInfo;\r\n        for (let key in options) {\r\n            resList.push(options[key]);\r\n            let tempRes = Laya.loader.getRes(options[key]);\r\n            if (tempRes) {\r\n                Laya.loader.clearRes(options[key]);\r\n            }\r\n        }\r\n        resList.push(\"img_empty.png\");\r\n    }\r\n    onEnable() {\r\n        this.alpha = 0;\r\n        this.zOrder = 1200;\r\n        Tween.to(this, { alpha: 1 }, 50);\r\n    }\r\n    changeValue(progress) {\r\n        if (this.bar && this.bar.value >= 1) {\r\n            if (!Browser.onMiniGame) {\r\n                this.bar.value = 1;\r\n                this.bar.changeHandler.clear();\r\n                this.event(LoadingView.LOAD_COMPLETE);\r\n            }\r\n            else {\r\n                this.bar.value = 0;\r\n            }\r\n            return;\r\n        }\r\n        if (this.bar) {\r\n            this.bar.value = progress;\r\n        }\r\n    }\r\n    loadSubpackages() {\r\n    }\r\n    compareVersion(v1, v2) {\r\n        v1 = v1.split('.');\r\n        v2 = v2.split('.');\r\n        const len = Math.max(v1.length, v2.length);\r\n        while (v1.length < len) {\r\n            v1.push('0');\r\n        }\r\n        while (v2.length < len) {\r\n            v2.push('0');\r\n        }\r\n        for (let i = 0; i < len; i++) {\r\n            const num1 = parseInt(v1[i]);\r\n            const num2 = parseInt(v2[i]);\r\n            if (num1 > num2) {\r\n                return 1;\r\n            }\r\n            else if (num1 < num2) {\r\n                return -1;\r\n            }\r\n        }\r\n        return 0;\r\n    }\r\n}\r\nLoadingView.LOAD_COMPLETE = \"load_complete\";\r\n//# sourceMappingURL=LoadingView.js.map",
  "references": [
    "/jsroads/blog/layademo-puremvc/src/ui/layaMaxUI.ts",
    "/jsroads/blog/layademo-puremvc/src/model/data/GameData.ts"
  ],
  "map": "{\"version\":3,\"file\":\"LoadingView.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../src/view/loading/LoadingView.ts\"],\"names\":[],\"mappings\":\"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\"}"
}
