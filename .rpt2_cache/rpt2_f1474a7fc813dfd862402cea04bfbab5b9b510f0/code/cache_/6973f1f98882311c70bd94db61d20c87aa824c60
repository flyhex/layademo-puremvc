{
  "code": "import BaseProxy from \"./BaseProxy\";\r\nimport AppConstants from \"../../AppConstants\";\r\nimport GameData from \"../data/GameData\";\r\nvar Browser = Laya.Browser;\r\nimport MyLocalStorage from \"../data/MyLocalStorage\";\r\nexport default class LoginProxy extends BaseProxy {\r\n    constructor(proxyName, data) {\r\n        super(LoginProxy.NAME, data);\r\n    }\r\n    login(message) {\r\n        if (Browser.onMiniGame) {\r\n            window.platform.i.login({\r\n                success: (result) => {\r\n                },\r\n                fail: () => {\r\n                },\r\n                complete: () => {\r\n                },\r\n            });\r\n        }\r\n    }\r\n    serverLogin(code) {\r\n        let userServer = false;\r\n        if (userServer) {\r\n            this.send({ url: \"/xxx/xxx\", code: code }, () => {\r\n            });\r\n        }\r\n        else {\r\n            MyLocalStorage.i.read();\r\n            GameLocalStorage.ins.getDataByKey(GameLocalStorage.USER, (usr) => {\r\n                if (usr) {\r\n                    SMHelper.ins.assignObject(this.user, usr);\r\n                }\r\n                GameData.ins.user.init();\r\n                if (callBack)\r\n                    callBack();\r\n                let isSameDay = true;\r\n                if (GameData.ins.user.loginDays) {\r\n                    isSameDay = TimeTrans.ins.timeStampIsSameDay(GameData.ins.user.loginTimeStamp, Browser.now());\r\n                    if (!isSameDay)\r\n                        this.updateNewDays();\r\n                }\r\n                else {\r\n                    this.updateNewDays();\r\n                }\r\n            });\r\n        }\r\n        GameData.ins.init(() => {\r\n            this.sendNotification(AppConstants.LOGIN_SUCCESS, { data: \"OK\" });\r\n        });\r\n    }\r\n}\r\nLoginProxy.NAME = \"LoginProxy\";\r\n",
  "references": [
    "/jsroads/blog/layademo-puremvc/src/model/proxy/BaseProxy.ts",
    "/jsroads/blog/layademo-puremvc/src/AppConstants.ts",
    "/jsroads/blog/layademo-puremvc/src/model/data/GameData.ts",
    "/jsroads/blog/layademo-puremvc/src/model/data/MyLocalStorage.ts"
  ]
}
