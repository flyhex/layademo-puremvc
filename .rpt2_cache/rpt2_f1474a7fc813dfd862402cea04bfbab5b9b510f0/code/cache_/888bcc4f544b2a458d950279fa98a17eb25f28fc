{
  "code": "import RedPoint from \"../../model/vo/RedPoint\";\r\nimport { RedPointType } from \"../../model/data/GameConstans\";\r\nvar EventDispatcher = Laya.EventDispatcher;\r\nexport default class SystemInstance extends EventDispatcher {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.points = [];\r\n    }\r\n    init() {\r\n        this.points.push(new RedPoint(RedPointType.UPGRADE_USER_LEVEL), new RedPoint(RedPointType.FREE_GIFT));\r\n    }\r\n    addPoint(id, bool) {\r\n        let found = this.points.some((element) => {\r\n            return element.id === id;\r\n        });\r\n        if (!found) {\r\n            this.points.push(new RedPoint(id, bool));\r\n        }\r\n    }\r\n    deletePoint(id) {\r\n        let index = this.points.findIndex((element) => {\r\n            return element.id === id;\r\n        });\r\n        if (index !== -1) {\r\n            this.points.splice(index, 1);\r\n        }\r\n    }\r\n    updatePoint(data, sendMsg) {\r\n        if (data instanceof RedPoint) {\r\n            let element = this.points.find((element) => {\r\n                return element.id === data.id;\r\n            });\r\n            if (element) {\r\n                element.has = data.has;\r\n            }\r\n            this.event(SystemInstance.UPDATE_RED_POINT, { list: [element] });\r\n        }\r\n        else if (data instanceof Array) {\r\n            let list = [];\r\n            data.forEach(((value, index, array) => {\r\n                let element = this.points.find((element) => {\r\n                    return element.id === value.id;\r\n                });\r\n                if (element) {\r\n                    element.has = value.has;\r\n                }\r\n                list.push(element);\r\n            }));\r\n            this.event(SystemInstance.UPDATE_RED_POINT, { list: list });\r\n        }\r\n    }\r\n    hasPoint(id) {\r\n        let element = this.points.find((element) => {\r\n            return element.id === id;\r\n        });\r\n        if (element) {\r\n            return element.has;\r\n        }\r\n        return false;\r\n    }\r\n}\r\nSystemInstance.UPDATE_RED_POINT = \"UPDATE_RED_POINT\";\r\n",
  "references": [
    "/jsroads/blog/layademo-puremvc/src/model/vo/RedPoint.ts",
    "/jsroads/blog/layademo-puremvc/src/model/data/GameConstans.ts"
  ]
}
