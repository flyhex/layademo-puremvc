{
  "code": "import { ui } from \"../../ui/layaMaxUI\";\r\nimport GameData from \"../../model/data/GameData\";\r\nvar Event = Laya.Event;\r\nvar Handler = Laya.Handler;\r\nvar Browser = Laya.Browser;\r\nvar Tween = Laya.Tween;\r\nvar LoadUI = ui.smile.LoadUI;\r\nexport default class LoadingView extends LoadUI {\r\n    constructor() {\r\n        super();\r\n        this.autoDestroyAtClosed = true;\r\n    }\r\n    static loadSub() {\r\n    }\r\n    onAwake() {\r\n        this.bar.value = 0;\r\n        this.bar.changeHandler = new Handler(this, this.changeValue, null, false);\r\n        Laya.loader.on(Event.ERROR, this, (e) => {\r\n            console.log(\"Laya.loader:ERROR\" + JSON.stringify(e));\r\n        });\r\n        let assets = GameData.i.config.resConfig;\r\n        let options = assets.resourceOptions, resList = [], info = assets.baseInfo;\r\n        for (let key in options) {\r\n            resList.push(options[key]);\r\n            let tempRes = Laya.loader.getRes(options[key]);\r\n            if (tempRes) {\r\n                Laya.loader.clearRes(options[key]);\r\n            }\r\n        }\r\n        resList.push(\"img_empty.png\");\r\n    }\r\n    onEnable() {\r\n        this.alpha = 0;\r\n        this.zOrder = 1200;\r\n        Tween.to(this, { alpha: 1 }, 50);\r\n    }\r\n    changeValue(progress) {\r\n        if (this.bar && this.bar.value >= 1) {\r\n            if (!Browser.onMiniGame) {\r\n                this.bar.value = 1;\r\n                this.bar.changeHandler.clear();\r\n                this.event(LoadingView.LOAD_COMPLETE);\r\n            }\r\n            else {\r\n                this.bar.value = 0;\r\n            }\r\n            return;\r\n        }\r\n        if (this.bar) {\r\n            this.bar.value = progress;\r\n        }\r\n    }\r\n    loadSubpackages() {\r\n    }\r\n    compareVersion(v1, v2) {\r\n        v1 = v1.split('.');\r\n        v2 = v2.split('.');\r\n        const len = Math.max(v1.length, v2.length);\r\n        while (v1.length < len) {\r\n            v1.push('0');\r\n        }\r\n        while (v2.length < len) {\r\n            v2.push('0');\r\n        }\r\n        for (let i = 0; i < len; i++) {\r\n            const num1 = parseInt(v1[i]);\r\n            const num2 = parseInt(v2[i]);\r\n            if (num1 > num2) {\r\n                return 1;\r\n            }\r\n            else if (num1 < num2) {\r\n                return -1;\r\n            }\r\n        }\r\n        return 0;\r\n    }\r\n}\r\nLoadingView.LOAD_COMPLETE = \"load_complete\";\r\n",
  "references": [
    "/jsroads/blog/layademo-puremvc/src/ui/layaMaxUI.ts",
    "/jsroads/blog/layademo-puremvc/src/model/data/GameData.ts"
  ]
}
