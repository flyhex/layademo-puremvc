{
  "code": "import AppConstants from \"../../AppConstants\";\r\nimport GameData from \"../../model/data/GameData\";\r\nimport { CustomEventConstants } from \"../../events/CustomEventConstants\";\r\nimport { CustomEventDispatcher } from \"../../events/CustomEventDispatcher\";\r\nimport SystemInstance from \"./SystemInstance\";\r\nvar Mediator = puremvc.Mediator;\r\nvar Browser = Laya.Browser;\r\nexport default class SystemMediator extends Mediator {\r\n    constructor(mediatorName, viewComponent) {\r\n        super(SystemMediator.NAME, new SystemInstance());\r\n    }\r\n    onRegister() {\r\n        CustomEventDispatcher.i.on(CustomEventConstants.RED_POINT_CHECK, this, () => {\r\n        });\r\n        this.getViewComponent().on(SystemInstance.UPDATE_RED_POINT, this, () => {\r\n        });\r\n    }\r\n    getViewComponent() {\r\n        return super.getViewComponent();\r\n    }\r\n    listNotificationInterests() {\r\n        return [\r\n            AppConstants.HEART_START,\r\n            AppConstants.NETWORK_STATUS_CHANGE,\r\n            AppConstants.REMOVE_MADIATOR\r\n        ];\r\n    }\r\n    handleNotification(notification) {\r\n        switch (notification.getName()) {\r\n            case AppConstants.HEART_START:\r\n                this.heartStart();\r\n                break;\r\n            case AppConstants.NETWORK_STATUS_CHANGE:\r\n                this.changeNetWork();\r\n                break;\r\n            case AppConstants.REMOVE_MADIATOR:\r\n                this.facade.removeMediator(notification.getBody());\r\n                break;\r\n            default:\r\n        }\r\n    }\r\n    heartStart() {\r\n        const HEART_INTERVAL = 60 * 1000;\r\n        Laya.timer.loop(HEART_INTERVAL, this, () => {\r\n            GameData.i.user.offLineTimeStamp = Browser.now();\r\n        });\r\n    }\r\n    changeNetWork() {\r\n    }\r\n}\r\nSystemMediator.NAME = \"SystemMediator\";\r\n",
  "references": [
    "/jsroads/blog/layademo-puremvc/src/AppConstants.ts",
    "/jsroads/blog/layademo-puremvc/src/model/data/GameData.ts",
    "/jsroads/blog/layademo-puremvc/src/events/CustomEventConstants.ts",
    "/jsroads/blog/layademo-puremvc/src/events/CustomEventDispatcher.ts",
    "/jsroads/blog/layademo-puremvc/src/view/system/SystemInstance.ts"
  ]
}
