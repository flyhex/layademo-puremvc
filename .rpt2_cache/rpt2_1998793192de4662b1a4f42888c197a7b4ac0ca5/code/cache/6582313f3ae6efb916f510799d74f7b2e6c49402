{
  "code": "import BaseSDK from \"./BaseSDK\";\r\nimport ResConfig from \"../utils/ResConfig\";\r\nimport JsonPool from \"../model/data/JsonPool\";\r\nimport Helper from \"../utils/Helper\";\r\nvar Browser = Laya.Browser;\r\nexport default class WxSDK extends BaseSDK {\r\n    constructor() {\r\n        super();\r\n        this._shareList = [];\r\n        this.api = wx;\r\n    }\r\n    login(callBack) {\r\n        super.login(null);\r\n        this.api.login({\r\n            success: (res) => {\r\n                console.log(`login调用成功${res.code}`);\r\n                callBack(res);\r\n            },\r\n            fail: (res) => {\r\n                console.log(`login调用失败`);\r\n            },\r\n            complete: () => {\r\n            },\r\n        });\r\n    }\r\n    get shareList() {\r\n        if (!this._shareList.length) {\r\n            let gameOptions = ResConfig.options.appConfig.gameOptions;\r\n            let head = [gameOptions.basePath, gameOptions.name, gameOptions.platform].join(\"/\");\r\n            for (let key in JsonPool.i.share) {\r\n                let item = Helper.i.deepCopy(JsonPool.i.share[key]);\r\n                if (item.show > 0) {\r\n                    item.imageUrl = head + \"/\" + item.imageUrl;\r\n                    this._shareList.push(item);\r\n                }\r\n            }\r\n        }\r\n        return this._shareList;\r\n    }\r\n    menuShareMessage() {\r\n        if (!Browser.onMiniGame)\r\n            return;\r\n        window.platform.i.onShareAppMessage(() => {\r\n            let msg = this.getMessage();\r\n            return {\r\n                title: msg.title,\r\n                imageUrl: msg.imageUrl,\r\n                success: (scope) => {\r\n                    console.log(\"onShareAppMessage:success\");\r\n                },\r\n                fail: () => {\r\n                    console.log(\"onShareAppMessage:fail\");\r\n                },\r\n                complete: () => {\r\n                }\r\n            };\r\n        });\r\n        this.showShareMenu();\r\n    }\r\n    showShareMenu() {\r\n        let shareObj = {\r\n            withShareTicket: true,\r\n            success: (scope) => {\r\n            },\r\n            fail: () => {\r\n            },\r\n            complete: () => {\r\n            }\r\n        };\r\n        window.platform.i.showShareMenu(shareObj);\r\n    }\r\n    getMessage(idx = -1) {\r\n        idx = idx === -1 ? Math.floor(Math.random() * this.shareList.length) : idx;\r\n        return this.shareList[idx];\r\n    }\r\n    getSDKVersion() {\r\n        return this.api.getSystemInfoSync().SDKVersion;\r\n    }\r\n    compareVersion(v1, v2) {\r\n        v1 = v1.split('.');\r\n        v2 = v2.split('.');\r\n        const len = Math.max(v1.length, v2.length);\r\n        while (v1.length < len) {\r\n            v1.push('0');\r\n        }\r\n        while (v2.length < len) {\r\n            v2.push('0');\r\n        }\r\n        for (let i = 0; i < len; i++) {\r\n            const num1 = parseInt(v1[i]);\r\n            const num2 = parseInt(v2[i]);\r\n            if (num1 > num2) {\r\n                return 1;\r\n            }\r\n            else if (num1 < num2) {\r\n                return -1;\r\n            }\r\n        }\r\n        return 0;\r\n    }\r\n}\r\n//# sourceMappingURL=WxSDK.js.map",
  "references": [
    "/jsroads/blog/layademo-puremvc/src/platform/BaseSDK.ts",
    "/jsroads/blog/layademo-puremvc/src/utils/ResConfig.ts",
    "/jsroads/blog/layademo-puremvc/src/model/data/JsonPool.ts",
    "/jsroads/blog/layademo-puremvc/src/utils/Helper.ts"
  ],
  "map": "{\"version\":3,\"file\":\"WxSDK.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../src/platform/WxSDK.ts\"],\"names\":[],\"mappings\":\"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\"}"
}
