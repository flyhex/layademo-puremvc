{
  "code": "import RedPoint from \"../../model/vo/RedPoint\";\r\nimport { RedPointType } from \"../../model/data/GameConstans\";\r\nvar EventDispatcher = Laya.EventDispatcher;\r\nexport default class SystemInstance extends EventDispatcher {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.points = [];\r\n    }\r\n    init() {\r\n        this.points.push(new RedPoint(RedPointType.UPGRADE_USER_LEVEL), new RedPoint(RedPointType.FREE_GIFT));\r\n    }\r\n    addPoint(id, bool) {\r\n        let found = this.points.some((element) => {\r\n            return element.id === id;\r\n        });\r\n        if (!found) {\r\n            this.points.push(new RedPoint(id, bool));\r\n        }\r\n    }\r\n    deletePoint(id) {\r\n        let index = this.points.findIndex((element) => {\r\n            return element.id === id;\r\n        });\r\n        if (index !== -1) {\r\n            this.points.splice(index, 1);\r\n        }\r\n    }\r\n    updatePoint(data, sendMsg) {\r\n        if (data instanceof RedPoint) {\r\n            let element = this.points.find((element) => {\r\n                return element.id === data.id;\r\n            });\r\n            if (element) {\r\n                element.has = data.has;\r\n            }\r\n            this.event(SystemInstance.UPDATE_RED_POINT, { list: [element] });\r\n        }\r\n        else if (data instanceof Array) {\r\n            let list = [];\r\n            data.forEach(((value, index, array) => {\r\n                let element = this.points.find((element) => {\r\n                    return element.id === value.id;\r\n                });\r\n                if (element) {\r\n                    element.has = value.has;\r\n                }\r\n                list.push(element);\r\n            }));\r\n            this.event(SystemInstance.UPDATE_RED_POINT, { list: list });\r\n        }\r\n    }\r\n    hasPoint(id) {\r\n        let element = this.points.find((element) => {\r\n            return element.id === id;\r\n        });\r\n        if (element) {\r\n            return element.has;\r\n        }\r\n        return false;\r\n    }\r\n}\r\nSystemInstance.UPDATE_RED_POINT = \"UPDATE_RED_POINT\";\r\n//# sourceMappingURL=SystemInstance.js.map",
  "references": [
    "/jsroads/blog/layademo-puremvc/src/model/vo/RedPoint.ts",
    "/jsroads/blog/layademo-puremvc/src/model/data/GameConstans.ts"
  ],
  "map": "{\"version\":3,\"file\":\"SystemInstance.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../src/view/system/SystemInstance.ts\"],\"names\":[],\"mappings\":\"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\"}"
}
